#!/bin/sh -x

echo $0 $@ 1>&2

CHAINCODE_SOURCE_DIR="$1"
CHAINCODE_METADATA_DIR="$2"

env 1>&2
jq . $CHAINCODE_METADATA_DIR/metadata.json 1>&2

# use jq to extract the chaincode type from metadata.json and exit with
# success if the chaincode type is golang
if [ "$(jq -r .type "$CHAINCODE_METADATA_DIR/metadata.json" | tr '[:upper:]' '[:lower:]')" = "golang" ]; then
    exit 0
fi

exit 1
